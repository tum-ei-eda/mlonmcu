PROJECT(target_sw_lib)

ADD_SUBDIRECTORY(support)
ADD_SUBDIRECTORY(ml_interface)

SET(TARGET_LIB_SOURCE targets/${TARGET_SYSTEM}.c)
IF(NOT EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/${TARGET_LIB_SOURCE})
    SET(TARGET_LIB_SOURCE targets/default.c)
ENDIF()

ADD_LIBRARY(${PROJECT_NAME} STATIC drivers/fake_input.c ${TARGET_LIB_SOURCE})
TARGET_INCLUDE_DIRECTORIES(${PROJECT_NAME} PUBLIC lib/drivers lib/targets)
TARGET_LINK_LIBRARIES(${PROJECT_NAME} PUBLIC support ml_interface)
